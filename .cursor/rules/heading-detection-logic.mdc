# Heading Detection Logic

## Core Function: `detect_headings()`
Located in both [app.py](mdc:app.py) and [pdf_to_markdown.py](mdc:pdf_to_markdown.py)

## Supported Title Formats

### 1. Numeric Numbering
- Pattern: `^\d+(\.\d+)*\.?\s+`
- Examples: `1.`, `2.1`, `3.2.1`
- Level calculation: `line.count('.') + 1`
- Max level: 6 (Markdown limit)

### 2. Chinese Numbering
- Pattern: `^[一二三四五六七八九十]+、`
- Examples: `一、`, `二、`, `三、`
- Always converted to level 1 (`# `)

### 3. Parenthetical Numbering
- Pattern: `^\([一二三四五六七八九十\d]+\)`
- Examples: `(1)`, `(2)`, `(一)`, `(二)`
- Always converted to level 2 (`## `)

### 4. Chapter Titles
- Detection: `len(line) < 50 and (line.isupper() or '第' in line and '章' in line)`
- Examples: `第一章`, `CHAPTER 1`
- Always converted to level 1 (`# `)

## Implementation Guidelines
- Use regex patterns for consistent detection
- Preserve original text after adding markdown syntax
- Handle edge cases (empty lines, whitespace)
- Maintain hierarchy relationships
- Consider adding new patterns for different document types
description:
globs:
alwaysApply: false
---
